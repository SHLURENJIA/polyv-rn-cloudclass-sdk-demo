!function(l){function e(e){for(var t,n,i=e[0],s=e[1],a=e[2],o=0,r=[];o<i.length;o++)n=i[o],Object.prototype.hasOwnProperty.call(u,n)&&u[n]&&r.push(u[n][0]),u[n]=0;for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(l[t]=s[t]);for(p&&p(e);r.length;)r.shift()();return d.push.apply(d,a||[]),c()}function c(){for(var e,t=0;t<d.length;t++){for(var n=d[t],i=!0,s=1;s<n.length;s++){var a=n[s];0!==u[a]&&(i=!1)}i&&(d.splice(t--,1),e=o(o.s=n[0]))}return e}var n={},u={0:0},d=[];function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=l,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var t=window.webpackJsonp=window.webpackJsonp||[],i=t.push.bind(t);t.push=e,t=t.slice();for(var s=0;s<t.length;s++)e(t[s]);var p=i;d.push([149,1]),c()}({126:function(e,t,n){},127:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var i=n(13),u=n.n(i),s=n(3),a=n.n(s),o=n(1),r=n.n(o),l=(n(82),n(6)),c=n.n(l),d=n(7),p=n.n(d),v=n(8),h=n.n(v),w=n(9),f=n.n(w);window.chooseAnswer=function(e){},window.endQuestionnaireAnswer=function(e){},window.sendWinData=function(e){},window.abandonLottery=function(){},window.submitSign=function(){},window.closeWebview=function(){},window.initWebview=function(){},window.linkClick=function(e){},window.sendWKWebViewMessage=function(e,t){window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers[e]&&window.webkit.messageHandlers[e].postMessage(t)};var m,b,y=(b=f.a,h()(g,b),r()(g,[{key:"chooseAnswer",value:function(e){window.chooseAnswer(e),window.sendWKWebViewMessage("chooseAnswer",e);try{window.WebViewJavascriptBridge.callHandler("chooseAnswer",e)}catch(e){}}},{key:"endQuestionnaireAnswer",value:function(e){window.endQuestionnaireAnswer(e),window.sendWKWebViewMessage("endQuestionnaireAnswer",e);try{window.WebViewJavascriptBridge.callHandler("endQuestionnaireAnswer",e)}catch(e){}}},{key:"sendWinData",value:function(e){window.sendWinData(e),window.sendWKWebViewMessage("sendWinData",e);try{window.WebViewJavascriptBridge.callHandler("sendWinData",e)}catch(e){}}},{key:"abandonLottery",value:function(){window.abandonLottery(),window.sendWKWebViewMessage("abandonLottery","");try{window.WebViewJavascriptBridge.callHandler("abandonLottery")}catch(e){}}},{key:"submitSign",value:function(){window.submitSign(),window.sendWKWebViewMessage("submitSign","");try{window.WebViewJavascriptBridge.callHandler("submitSign")}catch(e){}}},{key:"closeWebview",value:function(){window.closeWebview(),window.sendWKWebViewMessage("closeWebview","");try{window.WebViewJavascriptBridge.callHandler("closeWebview")}catch(e){}}},{key:"initWebview",value:function(){window.initWebview(),window.sendWKWebViewMessage("initWebview","");try{window.WebViewJavascriptBridge.callHandler("initWebview")}catch(e){}}},{key:"linkClick",value:function(e){window.linkClick(e),window.sendWKWebViewMessage("linkClick",e);try{window.WebViewJavascriptBridge.callHandler("linkClick",e)}catch(e){}}}]),new g);function g(){return a()(this,g),c()(this,p()(g).call(this))}window.updateNewQuestion=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("updateNewQuestion",e),t("收到答题信息")},window.hasChooseAnswer=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("hasChooseAnswer",e),t("收到答题结果:"+e)},window.testQuestion=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("extraQuestionMessageHandler",e),t("收到额外消息:"+e)},window.startQuestionNaire=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("startQuestionNaire",e),t("收到问卷信息:"+e)},window.stopQuestionNaire=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("stopQuestionNaire",e),t("收到问卷结束:"+e)},window.startLottery=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("startLottery",e),t("收到抽奖开始:"+e)},window.stopLottery=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("stopLottery",e),t("收到抽奖结束:"+e)},window.startSign=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("startSign",e),t("收到签到开始"+e)},window.stopSign=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("stopSign",e),t("收到签到结束"+e)},window.closeLotteryWinner=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("closeLotteryWinner",e),t("收到中奖中关闭窗口"+e)},window.bulletin=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("bulletin",e),t("收到公告"+e)},window.removeBulletin=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("removeBulletin",e),t("收到删除公告"+e)},window.onStartRecord=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("onStartRecord",e),t("收到开始直播"+e)},window.onPauseRecord=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("onPauseRecord",e),t("收到暂停直播"+e)},window.onExitRecord=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};y.emit("onExitRecord",e),t("收到下课事件"+e)},m=function(e){e.init(function(e,t){}),y.emit("bridgeInit"),e.registerHandler("updateNewQuestion",window.updateNewQuestion),e.registerHandler("hasChooseAnswer",window.hasChooseAnswer),e.registerHandler("testQuestion",window.testQuestion),e.registerHandler("startQuestionNaire",window.startQuestionNaire),e.registerHandler("stopQuestionNaire",window.stopQuestionNaire),e.registerHandler("startLottery",window.startLottery),e.registerHandler("stopLottery",window.stopLottery),e.registerHandler("startSign",window.startSign),e.registerHandler("stopSign",window.stopSign),e.registerHandler("closeLotteryWinner",window.closeLotteryWinner),e.registerHandler("bulletin",window.bulletin),e.registerHandler("removeBulletin",window.removeBulletin),e.registerHandler("onStartRecord",window.onStartRecord),e.registerHandler("onPauseRecord",window.onPauseRecord),e.registerHandler("onExitRecord",window.onExitRecord)},window.WebViewJavascriptBridge?m(WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){m(WebViewJavascriptBridge)},!1);var k,L,E=y,S=n(22),C=n.n(S),q=n(51),T=n.n(q),W=(n(126),"ABCDEFGHIJKLMNOPQRSTUVWXYZ"),A={parseString:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").trim()},questionTypeTxt:function(e){return"C"===e?"多选":"单选"},isMultiSelect:function(e){return"C"===e},getStatusClass:function(e){var t="";switch(e){case"success":t="answer-right";break;case"error":t="answer-error";break;case"checked":t="answer-checked";break;case"selectRight":t="answer-right-select";break;case"normal":t="answer-normal";break;case"noselect":t="no-select"}return t},option:function(e){var t=e.ratio,n=void 0===t?"0":t,i=e.contain,s=void 0===i?"":i,a=e.type,o=void 0===a?"":a,r=e.index,l=e.count,c=void 0===l?"":l;return s?'\n    <li class="'.concat(this.getStatusClass(o),'" data-options="').concat(r,'">\n      <div class="ppt-answer-ratio" style="width:').concat(n,'"></div>\n      <div class="ppt-answer-option">').concat(r,". ").concat(this.parseString(s),'</div>\n      <span class="ppt-answer-count">').concat(c,"</span>\n    </li>\n    "):""},getOptions:function(t){for(var e=u()(t).filter(function(e){return-1!==e.indexOf("option")&&t[e]}).length,n="",i=0;i<e;i++)n+=this.option({contain:t["option".concat(i+1)],index:W[i],type:t["type".concat(i+1)],ratio:t["ratio".concat(i+1)]||0,count:t["result".concat(i+1)]});return n},card:function(e){var t="id-".concat((new Date).getTime()),n=document.createElement("div");return n.setAttribute("class","ppt-answer-card ".concat(e.tipsClass||"")),n.innerHTML='<div class="ppt-answer-head">\n      '.concat(e.tips,'\n      <span class="ppt-answer-close" data-type="close">×</span>\n    </div>\n    <div class="ppt-answer-contain">\n      <h3>【').concat(this.questionTypeTxt(e.type),"】").concat(this.parseString(e.title||e.name),'</h3>\n      <ul class="ppt-answer-list">\n        ').concat(this.getOptions(e),'\n      </ul>\n    </div>\n    <div class="ppt-answer-foot">\n      <span id="').concat(t,'" class="ppt-answer-btn ').concat(e.btnClass||"",'" data-type="').concat(e.submitType,'">').concat(e.btn,"</span>\n    </div>"),{el:n,id:t}},tips:function(e){var t=document.createElement("div");return t.textContent=e,t.classList.add("ppt-answer-tips"),t}},H=(L=f.a,h()(K,L),r()(K,[{key:"updateNewQuestion",value:function(e){if("S"!==e.type){this.visible=!0,this.currentStatus={id:e.questionId,type:"commit"},this.selectOptions=[];var t=T()({submitType:"commit",btn:"提交答案",tips:"答题卡"},e);this.initElement(t,!0,e.questionId,A.isMultiSelect(t.type))}else this.emit("knowAnswer")}},{key:"hasChooseAnswer",value:function(e,t){if("S"!==t.type){this.visible=!0,this.currentStatus={id:t.questionId,type:"close"},t.result=t.data||t.result;var n=this.createResultData(e,t.result),i=this.getResultTips(e,t.result.answer,t.questionId),s=T()({submitType:"close",btn:"知道了",btnClass:"answer-primary",tips:i.tips,tipsClass:i.tipsClass},n,t,t.content);this.initElement(s,!1)}else this.emit("knowAnswer")}},{key:"stopQuestion",value:function(e){if(this.el&&"commit"===this.currentStatus.type&&this.currentStatus.id===e.questionId){this.currentStatus.type="stop";var t=A.getStatusClass("checked");this.btn.classList.remove("answer-primary"),this.btn.textContent="已截止",this.selectOptions=[],C()(this.el.querySelectorAll(".".concat(t))).forEach(function(e){e.classList.remove(t)})}else this.emit("knowAnswer")}},{key:"initElement",value:function(e,t,n,i){var s=3<arguments.length&&void 0!==i&&i;this.removeCard();var a=A.card(e);this.el=a.el,this.wrap.appendChild(this.el),this.btn=document.getElementById(a.id),this.wrap.classList.add("answer-show"),this.bindEvent(t,n,s)}},{key:"getResultTips",value:function(e,t){var n=e||"",i="",s="";return n?s=n===t?(i="回答正确",A.getStatusClass("success")):(i="回答错误",A.getStatusClass("error")):i="未作答",{tips:i,tipsClass:s}}},{key:"createResultData",value:function(e,i){var s=this,a={},o=e.split("");return i.singleResult.forEach(function(e,t){var n=W[t];console.log(n),a["result".concat(t+1)]=e,a["ratio".concat(t+1)]=e/(i.total||1)*100+"%",a["type".concat(t+1)]=s.getAnswerType(i.answer,n,-1!==o.indexOf(n),e)}),a}},{key:"getAnswerType",value:function(e,t,n,i){var s=-1!==e.indexOf(t);return s&&n?"selectRight":!i&&s?"noselect":s?"success":!s&&n?"error":"normal"}},{key:"bindEvent",value:function(e,n,t){var s=this,a=2<arguments.length&&void 0!==t&&t,o=null;this.el.addEventListener("click",function(e){var t=e.target.getAttribute("data-type");t&&("close"===t&&(s.removeCard(),s.emit("knowAnswer")),"commit"===t&&s.commit(n))}),e&&this.el.addEventListener("click",function(e){if("stop"!==s.currentStatus.type){for(var t=!0,n=e.target,i=null;t;){if(i=n.getAttribute("data-options")){t=!1;break}if(n===s.el){t=!1,n=null;break}if(!(n=n.parentNode))break}i&&(a?s.multiHandler(n,i):o=s.singleHandler(o,n,i))}})}},{key:"multiHandler",value:function(e,t){var n=A.getStatusClass("checked"),i=this.selectOptions.indexOf(t);-1<i?this.selectOptions.splice(i,1):this.selectOptions.push(t),0<this.selectOptions.length?this.btn.classList.add("answer-primary"):this.btn.classList.remove("answer-primary"),e.classList.toggle(n)}},{key:"singleHandler",value:function(e,t,n){var i=A.getStatusClass("checked");return e&&e.classList.remove(i),t.classList.add(i),this.selectOptions=[n],this.btn.classList.add("answer-primary"),t}},{key:"sortResult",value:function(e){return(0<arguments.length&&void 0!==e?e:[]).sort().join("")}},{key:"commit",value:function(e){var t=this,n=this.sortResult(this.selectOptions);n&&(this.removeCard(),this.showTips("提交成功",1.5,function(){t.emit("chooseAnswer",{answerId:n,questionId:e})}))}},{key:"removeCard",value:function(){this.el&&(this.wrap.removeChild(this.el),this.el=null,this.wrap.classList.remove("answer-show"))}},{key:"showTips",value:function(e,t,n){var i=this,s=1<arguments.length&&void 0!==t?t:2,a=2<arguments.length&&void 0!==n?n:function(){},o=A.tips(e);this.wrap.appendChild(o),this.wrap.classList.add("answer-show"),s&&setTimeout(function(){i.wrap.removeChild(o),i.wrap.classList.remove("answer-show"),a()},1e3*s)}}]),K),N=n(50),I=n.n(N),x=(n(127),n(33)),Q=n.n(x),O=n(34),B=n.n(O),M={mainTmp:function(e){var t=this.getScore(e),n=t.totalScore,i=t.averageScore,s=document.createElement("div");return s.setAttribute("class","plv-questionnaire-result-container"),s.innerHTML='\n      <div class="qn-result-head">\n        <h4>'.concat(e.questionnaireTitle,'</h4>\n        <ul class="qn-head-right">\n          <li>\n            <p>提交量</p>\n            <span>').concat(e.total,"</span>\n          </li>\n          <li>\n            <p>总分</p>\n            <span>").concat(n,"</span>\n          </li>\n          <li>\n            <p>平均分</p>\n            <span>").concat(i,'</span>\n          </li>\n        </ul>\n      </div>\n      <div class="qn-result-body">\n        ').concat(this.getMainContent(e.data),'\n      </div>\n      <div class="qn-result-footer">\n        <button id="questionnaireResultClose">关闭</button>\n      </div>\n    ').trim(),s},qnContent:function(e){if("Q"===e.type)return'<div class="qn-body-list">非选择题结果不显示</div>';var t="",n="";switch(e.type){case"R":t="<p>单选</p>";break;case"C":t="<p>多选</p>";break;default:t="<p>问答</p>"}"Y"===e.scoreEnabled&&(n="\n        <span>".concat(Number(e.score),'分题</span>\n        <span class="result-average">平均分：').concat(B()(e.totalScore/e.total).toFixed(),"</span>\n      "));var i="Y"===e.required?'<span class="result-require">*</span>':"";return'\n      <div class="qn-body-list">\n        <div class="qn-body-title">\n          '.concat(t).concat(n,'\n        </div>\n        <h4 class="qn-body-name">').concat(e.name).concat(i,"</h4>\n        <ul>\n          ").concat(this.returnOptions(e),"\n        </ul>\n      </div>")},options:function(e){var t=e.rightAnswer,n=t?'<span class="right-option-gou"></span>':"",i=t?"right-color":"normal-color";return'\n      <li class="result-options-wrap">\n        <div class="result-percent-head '.concat(t?"right-hover-color":"normal-hover-color",'" style="width: ').concat(Q()(e.percent),'%"></div>\n        <div class="result-full"></div>\n        <div class="result-percent-total">\n          ').concat(n,'\n          <span class="result-options-list">').concat("ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(e.index),". ").concat(e.option,'</span>\n          <span class="result-options-percent ').concat(i,'">').concat(e.count,"票 (").concat(e.percent,"%}</span>\n        </div>\n      </li>\n    ")},returnOptions:function(e){var n=this;return this.getOptionsDetail(e).reduce(function(e,t){return"".concat(e).concat(n.options(t))},"")},getMainContent:function(e){var n=this;return e.reduce(function(e,t){return"".concat(e).concat(n.qnContent(t)).trim()},"")},getSingleOptionPercent:function(e,t){return 0===Number(t)?0:B()(100*e/t).toFixed(2)},returnIsAnswer:function(e,t){return-1!==e.split("").map(function(e){return e.toUpperCase().charCodeAt()-65}).join("").indexOf(t)},getOptionsDetail:function(n){var i=this,s=[],a=n.answerResult;return u()(n).filter(function(e){return 0===e.indexOf("option")&&n[e]}).forEach(function(e,t){s.push({option:n[e],percent:i.getSingleOptionPercent(a[t],n.total),rightAnswer:i.returnIsAnswer(n.answer,t),index:t,count:a[t]})}),s},getScore:function(e){var t=0,n=0;e.data.forEach(function(e){"Q"!==e.type&&(t+=Number(e.score),n+=Number(e.totalScore))});var i=B()(n/e.total).toFixed(2);return{totalScore:t,averageScore:i}}},R="ABCDEFGHIJKLMNOPQRSTUVWXYZ",V={parseString:function(e){return e&&"number"!=typeof e?e.replace(/</g,"&lt;").replace(/>/g,"&gt;").trim():e},layout:function(e,t){e.questions;var n=e.title,i=void 0===n?"":n,s=t?"live-questionnaire-pc":"live-questionnaire-mobile",a=t?"":'<div class="live-questionnaire-head">\n    '.concat(this.parseString(i),'\n    <span data-type="close">×</span>\n    </div>'),o=document.createElement("div");return o.setAttribute("class","live-questionnaire ".concat(s)),o.innerHTML="\n    ".concat(a,'\n    <div class="live-questionnaire-container">\n      <div class="live-questionnaire-content js-questionnaireContent">\n\n      </div>\n    </div>').trim(),o},option:function(e,t,n){var i=1<arguments.length&&void 0!==t?t:"",s=2<arguments.length?n:void 0;return i=this.parseString(i),'\n    <div class="live-questionnaire-option live-questionnaire-option-'.concat(e,'" title="').concat(i,'" data-answer="').concat(R[s],'">\n      <span>').concat(R[s],".").concat(i,"</span>\n    </div>\n    ").trim()},textarea:function(){return"\n      <textarea></textarea>\n    ".trim()},btn:function(){var e=document.createElement("div");return e.setAttribute("class","live-questionnaire-foot"),e.innerHTML='<span data-type="submit">提交</span>',e},question:function(n){var e,i=this;if("Q"===n.type)e=this.textarea();else{var s=[];n.options.forEach(function(e,t){t%2==0?s.push([e]):s[s.length-1].push(e)});var a=0;e=s.reduce(function(e,t){return"".concat(e,'<div class="live-questionnaire-question-col">').concat(i.option(n.type,t[0],a++)).concat(t[1]?i.option(n.type,t[1],a++):"","</div>")},"")}var t=document.createElement("div");return t.setAttribute("class","live-questionnaire-question"),t.innerHTML='<div class="live-questionnaire-question-head">'.concat(n.index,"、").concat(this.parseString(n.name),"<sup>").concat(n.required?"*":"","</sup>").concat("C"===n.type?" <span>(多选)</span>":"",'</div>\n      <div class="live-questionnaire-question-error ppt-hide js-questionnaireError"><span>这道题必填哦</span></div>\n      <div class="js-questionnaireOption">').concat(e,"</div>").trim(),t},tips:function(e){var t=document.createElement("div");return t.setAttribute("class","live-questionnaire-tips"),t.textContent=e,t}},P=(k=f.a,h()(j,k),r()(j,[{key:"singleHandler",value:function(e,t,n){n.answer!==t&&(n.currentEl&&n.currentEl.classList.remove("checked"),n.required&&n.showError&&(n.showError=!1,n.tips.classList.add("ppt-hide")),e.classList.add("checked"),n.answer=t,n.currentEl=e)}},{key:"multiHandler",value:function(e,t,n){n.answer||(n.answer={}),n.answer[t]?(e.classList.remove("checked"),delete n.answer[t]):(e.classList.add("checked"),n.answer[t]=!0),n.required&&n.showError&&0<u()(n.answer).length&&(n.showError=!1,n.tips.classList.add("ppt-hide"))}},{key:"askHandler",value:function(e,t){e.querySelector("textarea").addEventListener("change",function(e){t.answer=e.target.value.trim(),t.required&&t.showError&&t.answer&&(t.showError=!1,t.tips.classList.add("ppt-hide"))})}},{key:"initOptionHandler",value:function(s){var a=this;"Q"===s.type?this.askHandler(s.el,s):s.el.addEventListener("click",function(e){for(var t,n=e.target,i=!0;i;){if((t=n.getAttribute("data-answer"))||n===s.el){i=!1;break}n=n.parentNode}t&&("R"===s.type?a.singleHandler(n,t,s):a.multiHandler(n,t,s))})}},{key:"initBtnHandler",value:function(){var c=this;this.data.el.addEventListener("click",function(e){for(var t,n=e.target,i=!0;i;){if((t=n.getAttribute("data-type"))||n===c.data.el){i=!1;break}n=n.parentNode}if(t){var s=c.data.el.querySelector(".live-questionnaire-container");if("close"===t&&(c.remove(),c.emit("stopQuestionNaire"),c.config.endCallback()),"submit"===t){if(!c.data.allow)return;var a=[],o=!0,r=!1;if(c.data.questions.forEach(function(e){var t=e.answer;"C"===e.type&&(t=t||{},t=u()(t).sort().join("")),"Q"===e.type&&(t=V.parseString(t)),e.required&&!t?(o=!1,e.tips.classList.remove("ppt-hide"),e.showError=!0,r||(s.scrollTop=e.el.offsetTop-60,r=!0)):a.push({questionId:e.id,answer:t})}),!o)return;var l=c.data.id;c.showTips("提交成功","success",function(){c.emit("endQuestionnaireAnswer",{id:l,answers:a}),c.el.classList.add("ppt-hide")}),c.remove()}}})}},{key:"showTips",value:function(e,t,n){var i=this,s=1<arguments.length&&void 0!==t?t:"success",a=2<arguments.length&&void 0!==n?n:function(){},o=V.tips(e);o.classList.add("live-questionnaire-tips-".concat(s)),this.el.appendChild(o),setTimeout(function(){i.el.removeChild(o),a()},2e3)}},{key:"remove",value:function(){this.el.removeChild(this.data.el),this.data=void 0}},{key:"render",value:function(){var t=this,e=V.layout(this.data,this.isClient),n=e.querySelector(".js-questionnaireContent");this.data.questions.forEach(function(e){e.el=V.question(e),e.tips=e.el.querySelector(".js-questionnaireError"),n.appendChild(e.el),t.initOptionHandler(e)}),this.data.btn=V.btn(),n.appendChild(this.data.btn),this.el.appendChild(e),this.data.el=e,this.initBtnHandler()}},{key:"formatQuestions",value:function(e){return e.map(function(n,e){return{required:"Y"===n.required,type:n.type,name:V.parseString(n.name),id:n.questionId,index:e+1,options:I()(new Array(10)).map(function(e,t){return n["option".concat(t+1)]}).filter(function(e){return!!V.parseString(e)})}})}},{key:"startQuestionNaire",value:function(e){if(this.el.classList.remove("ppt-hide"),-1===this.idLists.indexOf(e.questionnaireId)){if(this.data){if(this.data.id===e.content.questionnaireId)return;this.remove()}this.config.startCallback(),this.data={title:V.parseString(e.content.questionnaireTitle),id:e.content.questionnaireId,questions:this.formatQuestions(e.content.questions),allow:!0},this.render()}}},{key:"stopQuestionNaire",value:function(e){var t=this;this.idLists.push(e.questionnaireId),this.data?(this.showTips("问卷已截止","stop",function(){t.emit("stopQuestionNaire")}),this.remove()):this.emit("stopQuestionNaire")}},{key:"returnResutQuestionnaire",value:function(e){var t=this,n=M.mainTmp(e);this.el.classList.remove("ppt-hide"),this.el.appendChild(n),document.getElementById("questionnaireResultClose").addEventListener("click",function(){t.el.removeChild(n),t.emit("stopQuestionNaire")})}}]),j),J=n(74),D=n.n(J);function j(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return a()(this,j),(t=c()(this,p()(j).call(this))).visible=!1,t.el=document.getElementById(e),t.id,t.isClient=n,t.config={},t.idLists=[],"function"!=typeof t.config.startCallback&&(t.config.startCallback=function(){}),"function"!=typeof t.config.endCallback&&(t.config.endCallback=function(){}),"function"!=typeof t.config.successCallback&&(t.config.successCallback=function(){}),t}function K(e){var t;return a()(this,K),(t=c()(this,p()(K).call(this))).wrap=document.getElementById(e),t.el=null,t.btn=null,t.visible=!1,t.selectOptions=[],t.currentStatus={},t}n(145);var z,Z,_,F,U,Y,G,X="3"===("version",z=window.location.search,Z=new RegExp("(^|&)".concat("version","=([^&]*)(&|$)")),(_=z.substr(1).match(Z))?decodeURIComponent(_[2].replace(/\s*/g,"")):null),$=(G=f.a,h()(re,G),r()(re,[{key:"startLottery",value:function(){this.closeElement(),this.visible=!0,this.el=function(){var e=document.createElement("div");return e.setAttribute("class","lottery-start-content el-lottery-content"),e.innerHTML='<span class="lottery-start-gif">正在抽奖</span>\n      <span class="lottery-start-close" data-type="close">×</span>',e}(),this.wrap.appendChild(this.el),this.wrap.classList.add("lottery-show")}},{key:"winLottery",value:function(e){this.el=function(e){var t=0<arguments.length&&void 0!==e?e:{prize:"",winnerCode:""},n=document.createElement("div");return n.setAttribute("class","lottery-main-container el-lottery-content"),n.innerHTML='\n      <span class="lottery-main-close" data-type="lottery-close">×</span>\n      <div class="lottery-main-head">\n        <p>中奖啦</p>\n        <p>'.concat(t.prize,"</p>\n        <span>兑换码：").concat(t.winnerCode,'</span>\n      </div>\n      <p>—— 请提交以下信息，后续有专人联系您兑奖 ——</p>\n      <div class="lottery-submit-data">\n        <input class="lottery-name" id="lotteryName" type="text" placeholder="请输入真实姓名">\n        <input class="lottery-tel" id="lotteryTel" type="text" placeholder="请输入手机号码">\n        ').concat(X?'<input class="lottery-adr" id="lotteryAdr" type="text" placeholder="请输入收件地址">':"",'\n      </div>\n      <button class="lottery-submit" id="lotterySubmit" data-type="submit-lottery">提交</button>\n    '),n}(e),this.wrap.appendChild(this.el);var t=function(e){var t=0<arguments.length&&void 0!==e?e:"",n=document.createElement("div");return n.setAttribute("class","lottery-prompt ppt-hide"),n.innerHTML=t,n}();this.el.appendChild(t),this.promptEl=document.getElementsByClassName("lottery-prompt")[0],this.inputCheck()}},{key:"notWinLottery",value:function(){this.el=function(){var e=document.createElement("div");return e.setAttribute("class","lottery-not-win el-lottery-content"),e.innerHTML='\n      <p>很遗憾您未中奖</p>\n      <button data-type="close-webview">知道了</>\n    ',e}(),this.wrap.appendChild(this.el)}},{key:"stopLottery",value:function(e){this.closeElement(),this.visible=!0,e.win?this.winLottery(e):this.notWinLottery(),this.wrap.classList.add("lottery-show")}},{key:"closeElement",value:function(){document.getElementsByClassName("el-lottery-content")[0]&&(this.el.remove(),this.el=null,this.wrap.classList.remove("lottery-show"))}},{key:"closeLotteryWinner",value:function(){confirm("确认放弃领取奖品？")&&(this.emit("abandonLottery"),this.closeElement(),this.emit("closeLotteryWebview"))}},{key:"bindEvent",value:function(){var i=this;this.wrap.addEventListener("click",function(e){var t=e.target.getAttribute("data-type");if(t)switch(t){case"close":i.closeElement(),i.emit("closeLotteryWebview");break;case"submit-lottery":if(i.checkAllowSubmit()){i.tipsShow("请填写正确信息");break}var n={name:i.nameValue,telephone:i.telephoneNumber};X&&(n.address=i.addressValue),i.emit("sendWinData",n),i.tipsShow("提交成功").then(function(){i.closeElement(),i.emit("closeLotteryWebview")});break;case"lottery-close":confirm("确认放弃领取奖品？")&&(i.emit("abandonLottery"),i.closeElement(),i.emit("closeLotteryWebview"));break;case"close-webview":i.closeElement(),i.emit("closeLotteryWebview")}})}},{key:"blur",value:function(){var e=document.getElementById("lotteryName"),t=document.getElementById("lotteryTel");e&&e.blur(),t&&t.blur()}},{key:"tipsShow",value:function(e){var t=this;return this.promptEl.innerHTML=e,this.promptEl.classList.remove("ppt-hide"),new D.a(function(e){clearTimeout(t.timer),t.timer=setTimeout(function(){t.promptEl.classList.add("ppt-hide"),e()},3e3)})}},{key:"checkAllowSubmit",value:function(){return this.specailCh||this.wrongNum||!this.nameValue||!this.telephoneNumber||!this.addressLegal}},{key:"checkSpecailChar",value:function(e){return!!e.match(["\ud83c[\udf00-\udfff]","\ud83d[\udc00-\ude4f]","\ud83d[\ude80-\udeff]"].join("|"))}},{key:"inputCheck",value:function(){var n=this,i=document.getElementById("lotteryName"),s=document.getElementById("lotteryTel");this.nameValue="",this.telephoneNumber="",this.addressValue="",i.addEventListener("blur",function(e){var t=e.target.value;10<t.length&&(t=t.substr(0,10),i.value=t),n.specailCh=n.checkSpecailChar(t),n.specailCh&&n.tipsShow("不可输入特殊字符"),n.nameValue=t}),s.addEventListener("keyup",function(e){var t=e.target.value;s.value=t.replace(/[^0-9.]/g,""),11<t.length&&(t=t.substr(0,11),s.value=t)}),s.addEventListener("blur",function(e){var t=e.target.value;/^1\d{10}$/.test(t)&&/^1[3456789]\d{9}$/.test(t)?n.wrongNum=!1:(n.tipsShow("请输入正确号码"),n.wrongNum=!0),n.telephoneNumber=t}),X&&document.getElementById("lotteryAdr").addEventListener("blur",function(e){var t=e.target.value;n.addressLegal=!n.checkSpecailChar(t),console.log(n.addressLegal,t),n.addressLegal||n.tipsShow("不可输入特殊字符"),n.addressValue=t})}}]),re),ee=(n(146),function(e){var t=document.createElement("div");return t.className="player-signed-container",t.innerHTML='\n      <span data-type="close">×</span>\n      <div class="signed-time" id="signTime">'.concat(e.limitTime,'</div>\n      <p class="sign-message">').concat(e.message,'</p>\n      <button class="btn-signed" data-type="sign-in" id="btnSign">签到</buttton>\n    '),t}),te=(Y=f.a,h()(oe,Y),r()(oe,[{key:"startSign",value:function(e){this.wrapClose(),this.visible=!0,this.el=ee(e),this.wrap.appendChild(this.el),this.wrap.classList.add("sign-show"),this.signTime=document.getElementById("signTime"),this.btnSign=document.getElementById("btnSign"),this.startCountDown(Number(e.limitTime))}},{key:"stopSign",value:function(){var e=this;clearInterval(this.signTimer),this.btnSign&&(this.visible=!0,this.btnSign.setAttribute("class","btn-sign-stop"),this.btnSign.setAttribute("disabled","disabled"),this.btnSign.innerHTML="签到已截止",setTimeout(function(){e.wrapClose(),e.emit("closeSignWebview")},3e3))}},{key:"startCountDown",value:function(n){var i=this;clearInterval(this.signTimer);var s=(new Date).getTime();this.signTimer=setInterval(function(){var e=(new Date).getTime()-s,t=n-Q()(e/1e3,10);(i.signTime.innerHTML=t)<1&&i.stopSign()},500)}},{key:"wrapClose",value:function(){document.getElementsByClassName("player-signed-container")[0]&&(this.el.remove(),this.el=null,this.wrap.classList.remove("sign-show"))}},{key:"bindEvent",value:function(){var i=this;this.wrap.addEventListener("click",function(e){var t=e.target.getAttribute("data-type");if(t)if("sign-in"===t){clearInterval(i.signTimer),i.timmer=null;var n=i.btnSign;signTime.innerHTML='<span class="submit-sign"></span>',n.setAttribute("class","btn-sign-submit"),n.setAttribute("disabled","disabled"),n.innerHTML="签到成功",i.emit("submitSign"),setTimeout(function(){i.wrapClose(),i.emit("closeSignWebview")},3e3)}else"close"===t&&(clearInterval(i.signTimer),i.wrapClose(),i.emit("closeSignWebview"))})}}]),oe),ne=(n(147),U=f.a,h()(ae,U),r()(ae,[{key:"bindCloseEvent",value:function(){function e(){t.hide(),t.emit("close"),t.remove()}var t=this;this.isPc||this.els.close.addEventListener("click",e),this.els.know.addEventListener("click",e)}},{key:"show",value:function(){this.visible=!0,this.el.classList.remove("ppt-hide")}},{key:"hide",value:function(){this.visible=!1,this.el.classList.add("ppt-hide")}},{key:"append",value:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t;this.els.content.innerHTML=e||"暂无公告",this.empty=!e,n&&(this.show(),this.bindLinkEvent())}},{key:"remove",value:function(){this.append("",!1)}},{key:"bindLinkEvent",value:function(){var e=this.el.querySelectorAll("a"),t=this;e.forEach(function(e){e.addEventListener("click",function(e){t.emit("linkClick",e.target.href),e.preventDefault()})})}},{key:"emptyAndVisible",get:function(){return this.empty&&this.visible}}]),ae),ie=(n(148),F=f.a,h()(se,F),r()(se,[{key:"bindCloseEvent",value:function(){function e(){t.hide()}var t=this;this.isPc||this.els.close.addEventListener("click",e),this.els.know.addEventListener("click",e)}},{key:"show",value:function(){this.visible=!0,this.el.classList.remove("ppt-hide")}},{key:"hide",value:function(){this.visible=!1,this.el.classList.add("ppt-hide"),this.append("",!1),this.emit("close")}},{key:"append",value:function(e,t){var n=!(1<arguments.length&&void 0!==t)||t;this.els.content.innerHTML=e||"",n&&this.show()}}]),se);function se(e,t){var n;return a()(this,se),(n=c()(this,p()(se).call(this))).visible=!1,n.isPc=t||!1,n.el=document.getElementById(e),n.els=C()(n.el.querySelectorAll("[data-el]")).reduce(function(e,t){return e[t.getAttribute("data-el")]=t,e},{}),n.bindCloseEvent(),n}function ae(e,t){var n;return a()(this,ae),(n=c()(this,p()(ae).call(this))).visible=!1,n.empty=!0,n.isPc=t||!1,n.el=document.getElementById(e),n.els=C()(n.el.querySelectorAll("[data-el]")).reduce(function(e,t){return e[t.getAttribute("data-el")]=t,e},{}),n.bindCloseEvent(),n}function oe(e){var t;return a()(this,oe),(t=c()(this,p()(oe).call(this))).signTimer=null,t.wrap=document.getElementById(e),t.visible=!1,t.bindEvent(),t}function re(e){var t;return a()(this,re),(t=c()(this,p()(re).call(this))).specailCh=!1,t.wrongNum=!1,t.addressLegal=!0,t.visible=!1,t.nameValue=null,t.telephoneNumber=null,t.addressValue=null,t.timer=null,t.wrap=document.getElementById(e),t.bindEvent(),t}function le(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a()(this,le),this.answer=new H(e.answerCard),this.questionnaire=new P(e.questionnaire),this.lottery=new $(e.lottery),this.sign=new te(e.sign),this.announcement=new ne(e.announcement),this.pauseTip=new ie(e.pauseTip),this.hideClass="ppt-hide",this.zIndex=10,this.eventLists=null,this.bindBridgeEvents(),this.bindAnswerEvent(),this.bindQuestionnaireEvent(),this.bindLotteryEvent(),this.bindSignEvent(),this.bindAnnouncementEvent(),this.bindPauseTipEvent();var t=setTimeout(function(){E.initWebview()},200);E.on("bridgeInit",function(){clearTimeout(t),setTimeout(function(){E.initWebview()},200)})}r()(le,[{key:"bridgeEvents",value:function(){var n=this;return{updateNewQuestion:function(e){n.announcementHandle(),n.answer.visible=!0,le.setZIndex(n.answer.wrap,++n.zIndex),n.answer.updateNewQuestion(JSON.parse(e)),n.lottery.blur()},hasChooseAnswer:function(e){n.announcementHandle();try{var t=JSON.parse(e);n.answer.visible=!0,le.setZIndex(n.answer.wrap,++n.zIndex),n.answer.hasChooseAnswer(t.answerId,t.data),n.lottery.blur()}catch(e){}},extraQuestionMessageHandler:function(e){n.announcementHandle();var t=JSON.parse(e);"S"!==t.type&&"STOP_TEST_QUESTION"===t.EVENT&&(n.answer.visible=!0,le.setZIndex(n.answer.wrap,++n.zIndex),n.answer.stopQuestion(t),n.lottery.blur())},startQuestionNaire:function(e){n.announcementHandle(),n.questionnaire.visible=!0,le.setZIndex(n.questionnaire.el,++n.zIndex),n.questionnaire.startQuestionNaire(JSON.parse(e)),n.lottery.blur()},stopQuestionNaire:function(e){n.announcementHandle(),n.questionnaire.visible=!0,n.questionnaire.stopQuestionNaire(JSON.parse(e))},startLottery:function(){n.announcementHandle(),n.lottery.visible=!0,n.lottery.startLottery(),le.setZIndex(n.lottery.wrap,++n.zIndex)},stopLottery:function(e){n.announcementHandle(),n.lottery.visible=!0,n.lottery.stopLottery(JSON.parse(e))},closeLotteryWinner:function(){n.announcementHandle(),n.lottery.closeLotteryWinner()},startSign:function(e){n.announcementHandle(),n.sign.visible=!0,n.sign.startSign(JSON.parse(e)),le.setZIndex(n.sign.wrap,++n.zIndex),n.lottery.blur()},stopSign:function(){n.sign.stopSign()},bulletin:function(e){n.announcement.append(JSON.parse(e).content)},removeBulletin:function(){n.announcement.remove()},onStartRecord:function(){n.pauseTip.hide()},onPauseRecord:function(e){n.announcementHandle(),n.pauseTip.append(JSON.parse(e).tip)},onExitRecord:function(){n.pauseTip.hide()}}}},{key:"bindBridgeEvents",value:function(){var t=this;this.eventLists=this.bridgeEvents(),u()(this.eventLists).forEach(function(e){E.on(e,t.eventLists[e])})}},{key:"announcementHandle",value:function(){this.announcement.emptyAndVisible&&this.announcement.hide()}}],[{key:"setZIndex",value:function(e,t){e.style.zIndex=t}}]),r()(le,[{key:"closeWebview",value:function(){this.answer.visible||this.questionnaire.visible||this.sign.visible||this.lottery.visible||this.announcement.visible||this.pauseTip.visible||E.closeWebview()}},{key:"bindAnswerEvent",value:function(){var t=this;this.answer.on("knowAnswer",function(){t.answer.visible=!1,t.closeWebview()}),this.answer.on("chooseAnswer",function(e){E.chooseAnswer(e),t.answer.visible=!1,t.closeWebview()})}},{key:"bindQuestionnaireEvent",value:function(){var t=this;this.questionnaire.on("endQuestionnaireAnswer",function(e){E.endQuestionnaireAnswer(e),t.questionnaire.visible=!1,t.closeWebview()}),this.questionnaire.on("stopQuestionNaire",function(){t.questionnaire.el.classList.add(t.hideClass),t.questionnaire.visible=!1,t.closeWebview()})}},{key:"bindLotteryEvent",value:function(){var t=this;this.lottery.on("sendWinData",function(e){t.lottery.visible=!1,E.sendWinData(e)}),this.lottery.on("abandonLottery",function(e){t.lottery.visible=!1,E.abandonLottery()}),this.lottery.on("closeLotteryWebview",function(){t.lottery.visible=!1,t.closeWebview()}),/iPad|iPhone|iPod/i.test(navigator.userAgent)&&window.addEventListener("orientationchange",function(){t.lottery.blur()},!1)}},{key:"bindSignEvent",value:function(){var e=this;this.sign.on("submitSign",function(){e.sign.visible=!1,E.submitSign()}),this.sign.on("closeSignWebview",function(){e.sign.visible=!1,e.closeWebview()})}},{key:"bindAnnouncementEvent",value:function(){this.announcement.on("close",this.closeWebview.bind(this)),this.announcement.on("linkClick",function(e){return E.linkClick(e)})}},{key:"bindPauseTipEvent",value:function(){this.pauseTip.on("close",this.closeWebview.bind(this))}}]),new le({answerCard:"answerCard",questionnaire:"questionnaire",lottery:"lottery",sign:"sign",announcement:"announcement",pauseTip:"pauseTip"})},82:function(e,t,n){}});